define(function(e){function t(e){return n.isFunction(e)||n.isPlainObject(e)?e:{top:e,left:e}}var n=e("jquery"),o=n.scrollTo=function(e,t,o){return n(window).scrollTo(e,t,o)};return o.defaults={axis:"xy",duration:0,limit:!0},o.window=function(){return n(window)._scrollable()},n.fn._scrollable=function(){return this.map(function(){var e=this,t=!e.nodeName||-1!=n.inArray(e.nodeName.toLowerCase(),["iframe","#document","html","body"]);if(!t)return e;var o=(e.contentWindow||e).document||e.ownerDocument||e;return/webkit/i.test(navigator.userAgent)||"BackCompat"==o.compatMode?o.body:o.documentElement})},n.fn.scrollTo=function(e,i,r){return"object"==typeof i&&(r=i,i=0),"function"==typeof r&&(r={onAfter:r}),"max"==e&&(e=9e9),r=n.extend({},o.defaults,r),i=i||r.duration,r.queue=r.queue&&r.axis.length>1,r.queue&&(i/=2),r.offset=t(r.offset),r.over=t(r.over),this._scrollable().each(function(){function s(e){c.animate(l,i,r.easing,e&&function(){e.call(this,f,r)})}if(null!=e){var a,u=this,c=n(u),f=e,l={},d=c.is("html,body");switch(typeof f){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(f)){f=t(f);break}if(f=d?n(f):n(f,this),!f.length)return;case"object":(f.is||f.style)&&(a=(f=n(f)).offset())}var m=n.isFunction(r.offset)&&r.offset(u,f)||r.offset;n.each(r.axis.split(""),function(e,t){var n="x"==t?"Left":"Top",i=n.toLowerCase(),h="scroll"+n,w=u[h],b=o.max(u,t);if(a)l[h]=a[i]+(d?0:w-c.offset()[i]),r.margin&&(l[h]-=parseInt(f.css("margin"+n))||0,l[h]-=parseInt(f.css("border"+n+"Width"))||0),l[h]+=m[i]||0,r.over[i]&&(l[h]+=f["x"==t?"width":"height"]()*r.over[i]);else{var v=f[i];l[h]=v.slice&&"%"==v.slice(-1)?parseFloat(v)/100*b:v}r.limit&&/^\d+$/.test(l[h])&&(l[h]=l[h]<=0?0:Math.min(l[h],b)),!e&&r.queue&&(w!=l[h]&&s(r.onAfterFirst),delete l[h])}),s(r.onAfter)}}).end()},o.max=function(e,t){var o="x"==t?"Width":"Height",i="scroll"+o;if(!n(e).is("html,body"))return e[i]-n(e)[o.toLowerCase()]();var r="client"+o,s=e.ownerDocument.documentElement,a=e.ownerDocument.body;return Math.max(s[i],a[i])-Math.min(s[r],a[r])},o});